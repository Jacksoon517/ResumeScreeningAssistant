<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ç®€å†ç­›é€‰åŠ©æ‰‹</title>
  <style>
    /* Theme variables */
    :root {
      /* Dark theme colors: black background with golden accents */
      --bg-color: #0d1117;
      --fg-color: #c9d1d9;
      --input-bg: #161b22;
      --border-color: #30363d;
      --button-bg: #f5c242; /* golden */
      --button-bg-hover: #e5b534;
      --button-text-color: #0d1117;
      --panel-bg: #21262d;
      --focus-color: #f5c242;
    }
    body.light {
      /* Light theme colors: white with deep blue accents */
      --bg-color: #ffffff;
      --fg-color: #202124;
      --input-bg: #ffffff;
      --border-color: #dadce0;
      --button-bg: #1f6feb; /* deep blue */
      --button-bg-hover: #2f81f7;
      --button-text-color: #ffffff;
      --panel-bg: #f8f9fa;
      --focus-color: #1f6feb;
    }
    body {
      font-family: Arial, sans-serif;
      width: 400px;
      padding: 16px;
      box-sizing: border-box;
      background-color: var(--bg-color);
      color: var(--fg-color);
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }
    .title {
      font-size: 18px;
      font-weight: bold;
    }
    .settings-toggle {
      cursor: pointer;
      font-size: 18px;
      user-select: none;
    }

    /* Theme switch (iOS style) */
    .theme-switch {
      position: relative;
      width: 46px;
      height: 22px;
      border-radius: 11px;
      background-color: var(--border-color);
      display: flex;
      align-items: center;
      cursor: pointer;
    }
    .theme-switch .knob {
      position: absolute;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      /* Highlight knob with current theme color */
      background-color: var(--button-bg);
      left: 2px;
      top: 1px;
      transition: left 0.25s ease;
    }
    body.light .theme-switch .knob {
      left: 24px;
    }
    .theme-switch .icon {
      font-size: 12px;
      position: absolute;
      top: 3px;
    }
    .theme-switch .light-icon {
      left: 4px;
    }
    .theme-switch .dark-icon {
      right: 4px;
    }

    /* Removed Mac controls since side panel provides built-in controls */
    textarea {
      width: 100%;
      box-sizing: border-box;
      min-height: 80px;
      resize: vertical;
      margin-bottom: 8px;
      padding: 6px;
      font-size: 14px;
      background-color: var(--input-bg);
      color: var(--fg-color);
      border: 1px solid var(--border-color);
      border-radius: 8px;
    }
    textarea:focus {
      outline: none;
      border: 2px solid var(--focus-color);
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 12px;
      margin-bottom: 4px;
    }
    .button-container {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 8px;
    }
    .button-container button {
      flex: 1;
      min-width: 120px;
    }
    button {
      padding: 6px 12px;
      font-size: 14px;
      background-color: var(--button-bg);
      color: var(--button-text-color);
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    button:hover {
      background-color: var(--button-bg-hover);
    }

    /* Upload area styles */
    .upload-area {
      margin-top: 12px;
      padding: 12px;
      border: 2px dashed var(--border-color);
      border-radius: 8px;
      text-align: center;
      font-size: 14px;
      color: var(--fg-color);
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    .upload-area.dragover {
      background-color: var(--panel-bg);
    }
    .result {
      background-color: var(--input-bg);
      padding: 6px;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      min-height: 60px;
      white-space: pre-wrap;
      font-size: 14px;
    }
    #settingsPanel {
      display: none;
      margin-top: 12px;
      padding: 8px;
      background-color: var(--panel-bg);
      border: 1px solid var(--border-color);
      border-radius: 8px;
    }
    #settingsPanel label {
      margin-top: 8px;
    }
    #settingsPanel input {
      width: 100%;
      box-sizing: border-box;
      margin-top: 4px;
      margin-bottom: 8px;
      padding: 4px;
      font-size: 13px;
      background-color: var(--input-bg);
      color: var(--fg-color);
      border: 1px solid var(--border-color);
      border-radius: 8px;
    }
    #settingsButtons {
      text-align: right;
    }
    #settingsButtons button {
      margin-left: 8px;
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="title">ç®€å†ç­›é€‰åŠ©æ‰‹</div>
    <div style="display:flex; gap:8px; align-items:center; position:relative;">
      <div id="themeSwitch" class="theme-switch" title="åˆ‡æ¢æ˜æš—æ¨¡å¼">
        <div class="knob"></div>
        <span class="icon light-icon">â˜€ï¸</span>
        <span class="icon dark-icon">ğŸŒ™</span>
      </div>
      <div id="openSidePanel" class="settings-toggle" title="æ‰“å¼€ä¾§è¾¹æ ">ğŸ“‚</div>
      <div id="settingsToggle" class="settings-toggle" title="è®¾ç½®">âš™ï¸</div>
    </div>
  </div>

  <label for="resumeInput">å€™é€‰äººç®€å†ï¼š</label>
  <textarea id="resumeInput" placeholder="è¯·ç²˜è´´å€™é€‰äººç®€å†æ–‡æœ¬"></textarea>

  <label for="jobInput">å²—ä½éœ€æ±‚ï¼ˆå¯é€‰ï¼‰ï¼š</label>
  <textarea id="jobInput" placeholder="è¯·ç²˜è´´å²—ä½æè¿°ï¼ˆå¯é€‰ï¼‰"></textarea>

  <div class="button-container">
    <button id="jsScoreBtn">JS è¯„åˆ†</button>
    <button id="summaryBtn">å¤§æ¨¡å‹æ‘˜è¦</button>
    <button id="scoreBtn">å¤§æ¨¡å‹è¯„åˆ†</button>
    <button id="extractBtn">è¯»å–é¡µé¢ç®€å†</button>
    <button id="questionBtn">ç”Ÿæˆæ²Ÿé€šé—®é¢˜</button>
  </div>

  <label>è¯„åˆ†ç»“æœï¼š</label>
  <div id="scoreResult" class="result"></div>

  <label>ç®€å†æ‘˜è¦ï¼š</label>
  <div id="summaryResult" class="result"></div>

  <label>æ²Ÿé€šå…³é”®é—®é¢˜ï¼š</label>
  <div id="questionResult" class="result"></div>

  <!-- Resume file upload area -->
  <div id="uploadArea" class="upload-area">
    <input id="fileInput" type="file" accept=".txt,.md,.json,.csv,.log,.pdf,.doc,.docx" style="display:none" />
    <div id="uploadText">æ‹–æ”¾æ–‡ä»¶æˆ–ç‚¹å‡»ä¸Šä¼ ç®€å†</div>
  </div>

  <!-- Settings panel (hidden by default) -->
  <div id="settingsPanel">
    <label for="apiKey">API Keyï¼š</label>
    <input id="apiKey" placeholder="è¯·è¾“å…¥ API Key" />
    <label for="apiUrl">æ¥å£åœ°å€ï¼š</label>
    <input id="apiUrl" placeholder="è¯·è¾“å…¥æ¥å£åœ°å€" />
    <label for="modelId">æ¨¡å‹ IDï¼š</label>
    <input id="modelId" placeholder="å¦‚ generalã€kimi ç­‰" />
    <div id="settingsButtons">
      <button id="cancelSettingsBtn">å–æ¶ˆ</button>
      <button id="saveConfigBtn">ä¿å­˜</button>
    </div>
  </div>

  <!-- External library for reading ZIP (DOCX) files. JSZip is loaded locally to respect Chrome extension CSP. -->
  <script src="libs/jszip.min.js"></script>
  <script src="popup.js"></script>
</body>
</html>